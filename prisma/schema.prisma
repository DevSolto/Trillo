generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
  schemas   = ["public", "auth"]
}

model Associacao {
  id     String @id @default(uuid()) @db.Uuid
  nome   String
  cnpj   String
  cidade String
  estado String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tarefas Tarefa[]

}

model Usuario {
  id      String @id @default(uuid()) @db.Uuid
  nome    String
  user_id String
  funcao  String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tarefasCriadas     Tarefa[] @relation("CriadorTarefa")
  tarefasResponsavel Tarefa[] @relation("ResponsavelTarefa")
  statusCriados      Status[]
  tiposCriados       Tipo[]
  
}

model Status {
  id        String   @id @default(uuid()) @db.Uuid
  nome      String
  descricao String
  criadorId String   @db.Uuid
  criador   Usuario  @relation(fields: [criadorId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tarefas   Tarefa[]
  
}

model Tipo {
  id        String   @id @default(uuid()) @db.Uuid
  nome      String
  descricao String
  criadorId String   @db.Uuid
  criador   Usuario  @relation(fields: [criadorId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tarefas   Tarefa[]
  
}

model Tarefa {
  id            String     @id @default(uuid()) @db.Uuid
  titulo        String
  descricao     String
  prioridade    String

  associacaoId  String     @db.Uuid
  associacao    Associacao @relation(fields: [associacaoId], references: [id])

  criadorId     String     @db.Uuid
  criador       Usuario    @relation("CriadorTarefa", fields: [criadorId], references: [id])

  responsavelId String     @db.Uuid
  responsavel   Usuario    @relation("ResponsavelTarefa", fields: [responsavelId], references: [id])

  statusId      String     @db.Uuid
  status        Status     @relation(fields: [statusId], references: [id])

  tipoId        String     @db.Uuid
  tipo          Tipo       @relation(fields: [tipoId], references: [id])

  data_inicio   DateTime
  data_fim      DateTime

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
}
